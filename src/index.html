<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Is het tijd voor het karretje? 🚗 | Vrijdagmelding</title>
    <meta name="description" content="Check of het al tijd is voor het karretje! Elke vrijdag na 16:00 is het tijd om te gaan shoppen, feesten of wat jouw definitie van 'het karretje' ook is. 🛒🍻">
    <meta name="keywords" content="vrijdag, karretje, shoppen, feesten, weekend, vrijdagmiddag, 16:00, tijd voor het karretje">
    <meta name="author" content="Karretje Team">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Dutch">
    <meta name="revisit-after" content="7 days">
    
    <!-- Open Graph / Facebook / WhatsApp -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.ishettijdvoorhetkarretje.nl/">
    <meta property="og:title" content="Is het tijd voor het karretje? 🚗">
    <meta property="og:description" content="Check of het al tijd is voor het karretje! Elke vrijdag na 16:00 is het tijd om te gaan shoppen, feesten of wat jouw definitie van 'het karretje' ook is. 🛒🍻">
    <meta property="og:image" content="https://www.ishettijdvoorhetkarretje.nl/assets/full_cart.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Het is tijd voor het karretje!">
    <meta property="og:site_name" content="Is het tijd voor het karretje?">
    <meta property="og:locale" content="nl_NL">
    
    <!-- Twitter Card -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.ishettijdvoorhetkarretje.nl/">
    <meta property="twitter:title" content="Is het tijd voor het karretje? 🚗">
    <meta property="twitter:description" content="Check of het al tijd is voor het karretje! Elke vrijdag na 16:00 is het tijd om te gaan shoppen, feesten of wat jouw definitie van 'het karretje' ook is. 🛒🍻">
    <meta property="twitter:image" content="https://www.ishettijdvoorhetkarretje.nl/assets/full_cart.jpg">
    <meta property="twitter:image:alt" content="Het is tijd voor het karretje!">
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#000000">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="assets/android-chrome-192x192.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.ishettijdvoorhetkarretje.nl/">
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
    <link rel="icon" href="assets/favicon.ico">
    <link rel="manifest" href="assets/site.webmanifest">
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Is het tijd voor het karretje?",
        "description": "Check of het al tijd is voor het karretje! Elke vrijdag na 16:00 is het tijd om te gaan shoppen, feesten of wat jouw definitie van 'het karretje' ook is.",
        "url": "https://www.ishettijdvoorhetkarretje.nl/",
        "applicationCategory": "EntertainmentApplication",
        "operatingSystem": "Web Browser",
        "author": {
            "@type": "Organization",
            "name": "Karretje Team"
        },
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "EUR"
        },
        "image": "https://www.ishettijdvoorhetkarretje.nl/assets/full_cart.jpg",
        "screenshot": "https://www.ishettijdvoorhetkarretje.nl/assets/full_cart.jpg",
        "featureList": [
            "Vrijdagmelding",
            "Real-time countdown",
            "Interactive effects",
            "Mobile responsive"
        ]
    }
    </script>
    <script>
        function init() {
            // Get themed video from festivity manager
            const videoSrc = window.festivityManager ? window.festivityManager.getVideo('init') : 'assets/default-mode/fish.mp4';
            
            // Check if we're in festive mode
            const isFestiveMode = window.festivityManager && window.festivityManager.getCurrentTheme().name !== 'Default';
            
            if (isFestiveMode) {
                // In festive mode: show video in bottom right corner with sound
                const html = `
                    <video loop id="main-init-video">
                        <source src="${videoSrc}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>`

                const div = document.createElement('div');
                div.innerHTML = html;
                document.body.appendChild(div);

                const video = div.querySelector('video');
                video.muted = false;
                video.autoplay = true;
                video.style.position = 'fixed';
                video.style.bottom = '0px';
                video.style.right = '0px';
                video.style.zIndex = '1000';
                video.style.width = document.body.clientWidth * 0.2 + 'px';
                video.style.height = document.body.clientHeight * 0.2 + 'px';
                video.play();
            } else {
                // In default mode: keep original hidden behavior
                const html = `
                    <video loop>
                        <source src="${videoSrc}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>`

                const div = document.createElement('div');
                div.style.display = 'none';
                div.innerHTML = html;
                document.body.appendChild(div);

                const video = div.querySelector('video');
                video.muted = false;
                video.autoplay = true;
                video.play();
            }

            const button = document.querySelector('.annoying-button');

            // Remove button element
            button.remove();

            // Add new gif fixed to the bottom left corner
            const gif = document.createElement('img');
            gif.src = 'assets/default-mode/cat.gif';

            gif.style.position = 'fixed';
            gif.style.bottom = `0px`;
            gif.style.left = '0px';
            gif.style.width = document.body.clientWidth * 0.2 + 'px';
            gif.style.height = document.body.clientHeight * 0.2 + 'px';
            gif.style.zIndex = '1000';
            document.body.appendChild(gif);

        }

        addEventListener('mousemove', (e) => {
            // Move annoying-button to mouse location with transform
            const button = document.querySelector('.annoying-button');

            if (!button) {
                return;
            }

            const top = e.clientY - button.clientHeight / 2;
            const left = e.clientX - button.clientWidth / 2;

            button.style.top = `${top}px`;
            button.style.left = `${left}px`;
        })


        // Toggle festive theme function
        function toggleFestiveTheme() {
            if (window.festivityManager) {
                const newTheme = window.festivityManager.toggleTheme();
                
                // Update button visibility based on current theme
                updateToggleButtonVisibility();
            } else {
                console.error('Festivity manager not available');
            }
        }
        
        // Update toggle button visibility
        function updateToggleButtonVisibility() {
            const themeTesting = document.getElementById('theme-testing');
            if (themeTesting && window.festivityManager) {
                const currentTheme = window.festivityManager.getCurrentTheme();
                // Show button if we're in a special month OR if we're currently in a festive theme
                if (window.festivityManager.isSpecialMonth() || currentTheme.name !== 'Default') {
                    themeTesting.style.display = 'block';
                } else {
                    themeTesting.style.display = 'none';
                }
            }
        }

        // Show toggle festive button only when festive mode is available
        document.addEventListener('DOMContentLoaded', () => {
            const themeTesting = document.getElementById('theme-testing');
            if (themeTesting && window.festivityManager) {
                // Only show if we're in a special month (festive mode available)
                if (window.festivityManager.isSpecialMonth()) {
                    themeTesting.style.display = 'block';
                } else {
                    themeTesting.style.display = 'none';
                }
            }
        });

    </script>
    <style>
        .annoying-button {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            background-color: greenyellow;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
        }
    </style>

    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <button class="annoying-button" style="font-size: 2em" onclick="init()">Klik hier voor de volledige ervaring</button>
    
    <!-- Toggle Festive Mode Button -->
    <div id="theme-testing" style="position: fixed; top: 20px; right: 20px; z-index: 10000; display: none;">
        <button id="toggle-festive-btn" onclick="toggleFestiveTheme()" style="
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        " onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 6px 20px rgba(255, 107, 53, 0.6)'" 
           onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 15px rgba(255, 107, 53, 0.4)'">
            🎉 Toggle Festive Mode
        </button>
    </div>
    <div class="side">
        <video autoplay loop muted>
            <source src="assets/default-mode/youtube_RbVMiu4ubT0_480x854_h264.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>
    
    <div class="center">
        <div class="fish">
            <video autoplay loop muted>
                <source src="assets/default-mode/fish.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        
        <div class="content" id="content">
            <img class="icon" id="icon" src="assets/default-mode/empty_cart.png" alt="Cart Icon">
            <div id="message" class="message"></div>
            <p id="remaining-time"></p>
            <img id="beer-drinking-gif" src="assets/default-mode/beer-drinking.gif" alt="Beer drinking animation" style="position: relative; display: block; margin: 0 auto;">

            <!-- Game link - only visible when NOT party time -->
            <div id="waiting-content" style="display: none;">
                <p>Speel Karretje the game!!!!! terwijl je wacht tot het vrijdag 16:00 is!</p>
                <a href="./karretje-the-game.html" class="game-link">
                    <img src="assets/kar.png" alt="Karretje" class="">
                </a>
            </div>
        </div>
        
        <div class="fish">
            <video autoplay loop muted>
                <source src="assets/default-mode/fish.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
    </div>
    
    <div class="side">
        <video autoplay loop muted>
            <source src="assets/default-mode/youtube_RbVMiu4ubT0_480x854_h264.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <script src="js/timeManager.js?v=3"></script>
    <script src="js/festivityManager.js?v=18"></script>
    <script src="js/coinCursor.js?v=2"></script>
    <script src="js/main.js?v=2"></script>
</body>
</html>
